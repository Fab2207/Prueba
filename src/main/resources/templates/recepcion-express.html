<!DOCTYPE html>
<html class="dark" lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Check-in/out Rápido - Oasis Digital</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#009B77",
              accent: "#D4AF37",
              "background-light": "#f6f8f6",
              "background-dark": "#121212",
            },
            fontFamily: {
              display: ["Inter", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
          },
        },
      };
    </script>
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .material-symbols-outlined.fill {
        font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
      }
    </style>
  </head>
  <body
    class="font-display bg-background-light dark:bg-background-dark text-[#EAEAEA]"
  >
    <div class="flex h-screen">
      <!-- SideNavBar -->
      <aside class="flex flex-col w-64 bg-[#1a1a1a] p-4 shrink-0">
        <div class="flex flex-col gap-4">
          <div class="flex items-center gap-3">
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
              data-alt="Oasis Digital logo"
              style="background-image: url('https://i.pravatar.cc/100?img=70')"
            ></div>
            <div class="flex flex-col">
              <h1 class="text-white text-base font-medium leading-normal">
                Oasis Digital
              </h1>
              <p class="text-gray-400 text-sm font-normal leading-normal">
                Sistema Hotelero
              </p>
            </div>
          </div>
          <nav class="flex flex-col gap-2 mt-4">
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors"
              th:href="@{/dashboard}"
            >
              <span class="material-symbols-outlined text-gray-300"
                >dashboard</span
              >
              <p class="text-white text-sm font-medium leading-normal">
                Dashboard
              </p>
            </a>
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary/20 border border-primary/50"
              th:href="@{/recepcion/express}"
            >
              <span class="material-symbols-outlined fill text-primary"
                >login</span
              >
              <p class="text-white text-sm font-medium leading-normal">
                Recepción Express
              </p>
            </a>
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors"
              th:href="@{/reservas}"
            >
              <span class="material-symbols-outlined text-gray-300">bed</span>
              <p class="text-white text-sm font-medium leading-normal">
                Reservas
              </p>
            </a>
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors"
              th:href="@{/calendario}"
            >
              <span class="material-symbols-outlined text-gray-300"
                >calendar_month</span
              >
              <p class="text-white text-sm font-medium leading-normal">
                Calendario
              </p>
            </a>
          </nav>
        </div>
        <div class="mt-auto flex flex-col gap-4">
          <a
            th:href="@{/reservas/nueva}"
            class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-accent text-background-dark text-sm font-bold leading-normal tracking-[0.015em] hover:bg-accent/90 transition-colors"
          >
            <span class="truncate">Nueva Reserva</span>
          </a>
          <div class="flex flex-col gap-1 border-t border-white/10 pt-4">
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors"
              th:href="@{/configuracion}"
            >
              <span class="material-symbols-outlined text-gray-300"
                >settings</span
              >
              <p class="text-white text-sm font-medium leading-normal">
                Ajustes
              </p>
            </a>
            <a
              class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition-colors"
              href="#"
            >
              <span class="material-symbols-outlined text-gray-300">help</span>
              <p class="text-white text-sm font-medium leading-normal">Ayuda</p>
            </a>
          </div>
        </div>
      </aside>
      <!-- Main Content -->
      <main class="flex-1 grid grid-cols-12 gap-6 p-6 overflow-y-auto">
        <!-- Left Column: Search and List -->
        <div class="col-span-12 lg:col-span-5 flex flex-col gap-4 h-full">
          <div class="flex min-w-72 flex-col gap-2">
            <p
              class="text-white text-3xl font-black leading-tight tracking-[-0.033em]"
            >
              Recepción Express
            </p>
            <p class="text-gray-400 text-base font-normal leading-normal">
              Procesa check-ins y check-outs de forma rápida y eficiente.
            </p>
          </div>
          <div class="px-1">
            <label class="flex flex-col min-w-40 h-12 w-full">
              <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
                <div
                  class="text-gray-400 flex border-2 border-r-0 border-white/20 bg-black/20 items-center justify-center pl-4 rounded-l-lg"
                >
                  <span class="material-symbols-outlined">search</span>
                </div>
                <input
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-r-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/80 border-2 border-l-0 border-white/20 bg-black/20 focus:border-primary/80 h-full placeholder:text-gray-500 px-4 text-base font-normal leading-normal"
                  placeholder="Buscar por nombre, DNI, reserva..."
                  value=""
                />
              </div>
            </label>
          </div>
          <div class="flex gap-3 px-1 overflow-x-auto">
            <div
              class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full border border-primary bg-primary/20 px-4 cursor-pointer"
            >
              <p class="text-white text-sm font-medium leading-normal">
                Llegadas de Hoy
              </p>
            </div>
            <div
              class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 px-4 cursor-pointer hover:bg-white/20 transition-colors"
            >
              <p class="text-gray-300 text-sm font-medium leading-normal">
                Salidas de Hoy
              </p>
            </div>
            <div
              class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-white/10 px-4 cursor-pointer hover:bg-white/20 transition-colors"
            >
              <p class="text-gray-300 text-sm font-medium leading-normal">
                Todas
              </p>
            </div>
          </div>
          <div class="flex flex-col gap-1 overflow-y-auto pr-2 flex-1">
            <!-- List Items (Thymeleaf) -->
            <div
              th:each="reserva, stat : ${reservas}"
              class="flex items-center gap-4 px-4 min-h-[72px] py-2 justify-between rounded-lg cursor-pointer transition-colors"
              th:classappend="${stat.first} ? 'bg-primary/20 border-l-4 border-primary' : 'hover:bg-white/10'"
            >
              <div class="flex items-center gap-4">
                <div
                  class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-12 w-12 shrink-0"
                  th:style="'background-image: url(https://i.pravatar.cc/100?img=' + ${stat.index} + ');'"
                ></div>
                <div class="flex flex-col justify-center">
                  <p
                    class="text-white text-base font-medium leading-normal line-clamp-1"
                    th:text="${reserva.cliente.nombres + ' ' + reserva.cliente.apellidos}"
                  >
                    Alejandro Martinez
                  </p>
                  <p
                    class="text-gray-400 text-sm font-normal leading-normal line-clamp-2"
                    th:text="${#temporals.format(reserva.fechaEntrada, 'dd MMM')} + ' - ' + ${#temporals.format(reserva.fechaSalida, 'dd MMM')}"
                  >
                    14 Dic - 18 Dic
                  </p>
                </div>
              </div>
              <div class="shrink-0">
                <p
                  class="text-sm font-medium leading-normal px-2 py-1 rounded-full"
                  th:classappend="${reserva.estado == 'PENDIENTE'} ? 'text-yellow-400 bg-yellow-400/10' :
                   ${reserva.estado == 'ACTIVA'} ? 'text-green-400 bg-green-400/10' :
                   'text-red-400 bg-red-400/10'"
                  th:text="${reserva.estado}"
                >
                  Pendiente
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Right Column: Details and Actions -->
        <div
          class="col-span-12 lg:col-span-7 flex flex-col gap-6 bg-[#1a1a1a] rounded-xl p-6"
          th:if="${reservaSeleccionada != null}"
        >
          <!-- Guest Summary -->
          <div class="border-b border-white/10 pb-6">
            <h3 class="text-lg font-bold text-white mb-4">
              Resumen del Huésped
            </h3>
            <div class="flex items-center gap-4">
              <div
                class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-16 w-16 shrink-0"
                style="background-image: url('https://i.pravatar.cc/100')"
              ></div>
              <div>
                <p
                  class="text-xl font-bold text-white"
                  th:text="${reservaSeleccionada.cliente.nombres + ' ' + reservaSeleccionada.cliente.apellidos}"
                >
                  Alejandro Martinez
                </p>
                <p
                  class="text-gray-400"
                  th:text="'DNI: ' + ${reservaSeleccionada.cliente.dni}"
                >
                  DNI: 12.345.678-Z
                </p>
              </div>
            </div>
          </div>
          <!-- Stay Details -->
          <div class="border-b border-white/10 pb-6">
            <h3 class="text-lg font-bold text-white mb-4">
              Detalles de la Estancia
            </h3>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p class="text-gray-400">Check-in</p>
                <p
                  class="text-white font-medium"
                  th:text="${#temporals.format(reservaSeleccionada.fechaEntrada, 'dd MMMM, yyyy')}"
                >
                  14 Diciembre, 2023
                </p>
              </div>
              <div>
                <p class="text-gray-400">Check-out</p>
                <p
                  class="text-white font-medium"
                  th:text="${#temporals.format(reservaSeleccionada.fechaSalida, 'dd MMMM, yyyy')}"
                >
                  18 Diciembre, 2023
                </p>
              </div>
              <div>
                <p class="text-gray-400">Tipo de Habitación</p>
                <p
                  class="text-white font-medium"
                  th:text="${reservaSeleccionada.habitacion.tipo}"
                >
                  Suite Deluxe Vista Mar
                </p>
              </div>
              <div>
                <p class="text-gray-400">Huéspedes</p>
                <p
                  class="text-white font-medium"
                  th:text="${reservaSeleccionada.numeroHuespedes + ' Adultos'}"
                >
                  2 Adultos
                </p>
              </div>
            </div>
          </div>
          <!-- Actions Card -->
          <div
            class="bg-black/20 p-6 rounded-lg flex-1 flex flex-col justify-between"
          >
            <div>
              <h3 class="text-lg font-bold text-white mb-2">
                Acciones Disponibles
              </h3>
              <p class="text-gray-400 text-sm">
                Confirme la identidad del huésped antes de proceder.
              </p>
            </div>
            <div class="flex flex-col gap-4 mt-6">
              <form
                th:action="@{/recepcion/checkin/{id}(id=${reservaSeleccionada.id})}"
                method="post"
              >
                <button
                  type="submit"
                  class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-accent text-background-dark text-base font-bold leading-normal tracking-wide hover:bg-accent/90 transition-colors"
                >
                  <span class="truncate">Confirmar Check-in</span>
                </button>
              </form>
              <a
                th:href="@{/reservas/ver/{id}(id=${reservaSeleccionada.id})}"
                class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-transparent border-2 border-primary text-primary text-base font-bold leading-normal tracking-wide hover:bg-primary/10 transition-colors"
              >
                <span class="truncate">Ver Detalles Completos</span>
              </a>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
